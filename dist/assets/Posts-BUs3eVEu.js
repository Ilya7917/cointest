import{d as j,u as F,B as E,g as p,C as H,o as i,c as l,a as e,t as u,n as R,_ as W,l as J,h as Q,b as g,m,F as S,p as M,v as V,G as X,H as Z,I as ee,x as U,e as te,A as se,f as ae,y as ne,z as oe}from"./index-LOAvtzEz.js";const ie="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20100%20100'%20preserveAspectRatio='xMidYMid'%20width='200'%20height='200'%20style='shape-rendering:%20auto;%20display:%20block;'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cg%3e%3cg%20transform='translate(80,50)'%3e%3cg%20transform='rotate(0)'%3e%3ccircle%20fill-opacity='1'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.875s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.875s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(71.21320343559643,71.21320343559643)'%3e%3cg%20transform='rotate(45)'%3e%3ccircle%20fill-opacity='0.875'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.75s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.75s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(50,80)'%3e%3cg%20transform='rotate(90)'%3e%3ccircle%20fill-opacity='0.75'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.625s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.625s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(28.786796564403577,71.21320343559643)'%3e%3cg%20transform='rotate(135)'%3e%3ccircle%20fill-opacity='0.625'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.5s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.5s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(20,50.00000000000001)'%3e%3cg%20transform='rotate(180)'%3e%3ccircle%20fill-opacity='0.5'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.375s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.375s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(28.78679656440357,28.786796564403577)'%3e%3cg%20transform='rotate(225)'%3e%3ccircle%20fill-opacity='0.375'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.25s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.25s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(49.99999999999999,20)'%3e%3cg%20transform='rotate(270)'%3e%3ccircle%20fill-opacity='0.25'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.125s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.125s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(71.21320343559643,28.78679656440357)'%3e%3cg%20transform='rotate(315)'%3e%3ccircle%20fill-opacity='0.125'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='0s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='0s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/g%3e%3c!--%20[ldio]%20generated%20by%20https://loading.io%20--%3e%3c/svg%3e",le="/assets/acceptet-BiKVjkxi.svg",ce="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='80px'%20height='80px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15%2012L12%2012M12%2012L9%2012M12%2012L12%209M12%2012L12%2015'%20stroke='%23878787'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M7%203.33782C8.47087%202.48697%2010.1786%202%2012%202C17.5228%202%2022%206.47715%2022%2012C22%2017.5228%2017.5228%2022%2012%2022C6.47715%2022%202%2017.5228%202%2012C2%2010.1786%202.48697%208.47087%203.33782%207'%20stroke='%23878787'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3c/svg%3e",re={class:"balance-panel"},ue={class:"balance-hint"},de={class:"balance__wrapper"},pe=j({__name:"DonateBalance",setup(x){var d;const s=F(),r=E(()=>{var v;const o=((v=s.user)==null?void 0:v.posts_balance.toString().length)||0;return o<5?"44px":o<8?"39px":o<12?"34px":o<15?"29px":"24px"}),h=p(((d=s.user)==null?void 0:d.posts_balance)||0);function k(o){const v=h.value,D=o-v;let w=900;D<=10&&(w=300);const L=performance.now();function N(A){const C=A-L,P=Math.min(C/w,1);h.value=Math.round(v+D*P),P<1&&requestAnimationFrame(N)}requestAnimationFrame(N)}return H(()=>{var o;return((o=s.user)==null?void 0:o.posts_balance)??0},o=>{k(o)},{immediate:!0}),(o,v)=>(i(),l("div",re,[e("span",ue,u(o.$t("account.yourDonateBalance")),1),e("div",de,[e("div",{class:"balance",style:R({fontSize:r.value})},u(h.value.toLocaleString()),5)])]))}}),me=W(pe,[["__scopeId","data-v-9240ccbf"]]),f=x=>(ne("data-v-1b0c4ad3"),x=x(),oe(),x),fe=f(()=>e("div",{class:"Bg"},null,-1)),ge={class:"navMenu"},ve=["src"],ye={key:0,class:"createPostMenu"},he={id:"progressbar"},_e={class:"createForm"},be={key:0,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},xe=f(()=>e("span",{style:{fontWeight:"bold",marginTop:"15px"}},"⚠️ Добавить можно только 1 изображение",-1)),ke={key:1,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},we=f(()=>e("label",{for:"fname"},"Описание(не обязательно)",-1)),Ce={key:2,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},Pe={style:{display:"flex",alignItems:"center"}},Te=f(()=>e("span",{style:{fontSize:"15px",fontWeight:"bold"}},"Платный пост (не обязательно)",-1)),Ie={class:"checkbox-wrapper-7",style:{marginLeft:"20px"}},De=f(()=>e("label",{class:"tgl-btn",for:"cb2-7"},null,-1)),Ne={key:0,style:{marginTop:"50px",textAlign:"center"}},Se=f(()=>e("span",{style:{fontSize:"15px",fontWeight:"bold"}},"Цена за разблокировку:",-1)),Le=f(()=>e("div",{style:{marginTop:"50px",textAlign:"center"}},[e("span",{style:{fontSize:"15px",fontWeight:"bold"}},"Стоимость создания поста: 5000🍆")],-1)),Ae={key:3},Be={key:0,style:{display:"flex",flexDirection:"column"}},Me=["src"],ze=f(()=>e("span",{style:{fontSize:"17px",fontWeight:"bold",marginTop:"10px"}},"Подождите, мы загружаем ваш пост...",-1)),$e={key:1},Ve=["src"],Ue={key:0,style:{display:"flex",justifyContent:"center"}},je={key:1,class:"boosts"},Fe={class:"post"},Re={class:"ownerData"},We=["src"],Oe={style:{fontSize:"25px",marginLeft:"15px"}},Ge=["src"],Ke={class:"postDescription",style:{height:"50px",alignItems:"center",display:"flex"}},qe={style:{fontSize:"25px"}},Ye={key:0,class:"unlock",style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px"}},Ee={style:{fontSize:"25px"}},He=["onClick"],Je={class:"donations",style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px"}},Qe={style:{fontSize:"25px"}},Xe=["onClick"],Ze={class:"popup-content"},et={class:"popup-header"},tt=f(()=>e("svg",{class:"close-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"16px",height:"16px"},[e("path",{d:"M 7 4 C 6.744125 4 6.4879687 4.0974687 6.2929688 4.2929688 L 4.2929688 6.2929688 C 3.9019687 6.6839688 3.9019687 7.3170313 4.2929688 7.7070312 L 11.585938 15 L 4.2929688 22.292969 C 3.9019687 22.683969 3.9019687 23.317031 4.2929688 23.707031 L 6.2929688 25.707031 C 6.6839688 26.098031 7.3170313 26.098031 7.7070312 25.707031 L 15 18.414062 L 22.292969 25.707031 C 22.682969 26.098031 23.317031 26.098031 23.707031 25.707031 L 25.707031 23.707031 C 26.098031 23.316031 26.098031 22.682969 25.707031 22.292969 L 18.414062 15 L 25.707031 7.7070312 C 26.098031 7.3170312 26.098031 6.6829688 25.707031 6.2929688 L 23.707031 4.2929688 C 23.316031 3.9019687 22.682969 3.9019687 22.292969 4.2929688 L 15 11.585938 L 7.7070312 4.2929688 C 7.5115312 4.0974687 7.255875 4 7 4 z"})],-1)),st=[tt],at={key:0,class:"popup-body"},nt=f(()=>e("p",null,"Price:",-1)),ot={key:1,class:"popup-body"},it={class:"slidecontainer",style:{marginTop:"30px"}},lt=["max"],ct={key:2,class:"myPosts"},rt=f(()=>e("div",{class:"icon-box"},"👆",-1)),ut={class:"text-container"},dt={class:"badge"},pt={class:"price"},mt=j({__name:"Posts",setup(x){J();const s=F();s.getBoosts(),p(!1),p(!1);const r=p("posts"),h=p(!1),k=p(!1),d=p({image:null,isPrivate:!1,description:"",price:0}),o=p(0),v=[{id:0,isActive:!0,text:"Add image"},{id:1,isActive:!1,text:"Write description"},{id:2,isActive:!1,text:"Choose Details"}];Q(()=>{r.value="posts",s.getMyBoughtPosts(),s.getPosts(),console.log(r.value)}),p({id:0,price:1e3});const D=[{id:0,ownerName:"Jack",ownerAvatar:"https://www.pinclipart.com/picdir/big/165-1653686_female-user-icon-png-download-user-colorful-icon.png",image:"https://goombastomp.com/wp-content/uploads/2022/07/image-34.png",description:"Cat from stray",donation:5e3,isPrivate:!1},{id:1,ownerName:"Ashley",ownerAvatar:"https://www.pinclipart.com/picdir/big/165-1653686_female-user-icon-png-download-user-colorful-icon.png",image:"https://goombastomp.com/wp-content/uploads/2022/07/image-34.png",description:"Cat from stray",donation:1582,isPrivate:!0},{id:2,ownerName:"Miki115",ownerAvatar:"https://www.pinclipart.com/picdir/big/165-1653686_female-user-icon-png-download-user-colorful-icon.png",image:"https://goombastomp.com/wp-content/uploads/2022/07/image-34.png",description:"Cat from stray",donation:113,isPrivate:!0}];p({id:0});const w=n=>{n!=r.value&&(r.value=n,console.log(n))},L=n=>{const c=n.target.files;c&&c.length>0&&(d.value.image=c[0],k.value=!0)},N=n=>{console.log(1);const c=n.target.value;c&&(d.value.description=c),console.log(d)},A=()=>{o.value!==0&&(k.value=!1),o.value++,v[o.value].isActive=!0},C=p(!1),P=()=>{if(d.value.isPrivate=h.value,d.value.image!=null){const n={image:d.value.image,isPrivate:d.value.isPrivate,description:d.value.description,price:d.value.price};o.value++,s.createPost(n).then(t=>{t&&setTimeout(()=>{o.value=0,r.value="posts",C.value=!0,C.value=!1,s.getPosts()},2500)})}else console.error("No file selected")},O=n=>`https://taptaptap.testcoin.uk/uploads/${n}`,_=p("close"),y=p({id:0,price:0}),z=(n,t,c)=>{switch(n){case"unlock":_.value=n,y.value.id=t,y.value.price=c;break;case"donate":y.value.id=t,_.value=n;break}},G=()=>{console.log(y.value.id),s.unlockPost(y.value.id).then(n=>{if(n&&s.posts!=null){let t=s.posts.findIndex(c=>c.ID==y.value.id);t!=-1&&(s.posts[t].IsPrivate=!1,s.getMyBoughtPosts())}})},K=(n,t)=>{if(s.user)return n!==s.user.id?!q(t):!1},q=n=>s.boughtPosts!=null&&s.boughtPosts.findIndex(c=>c.ID==n)!=-1,b=p(0),Y=()=>{s.user&&(s.user.balance<Number(b.value)&&se().showAlert("Недостаточно средств на счету"),s.donatePost(y.value.id,b.value).then(n=>{if(n&&s.posts!=null){let t=s.posts.findIndex(c=>c.ID==y.value.id);t!=-1&&(s.posts[t].Donated+=Number(b.value))}}))};return(n,t)=>{var c;return i(),l(S,null,[fe,e("div",ge,[e("button",{class:"mypost-button",onClick:t[0]||(t[0]=a=>w(r.value=="create"||r.value=="myposts"?"posts":"myposts"))},u(r.value=="create"?"Posts":r.value=="posts"?"My posts":"Posts"),1),r.value!=="create"?(i(),l("img",{key:0,src:g(ce),alt:"Your Icon",style:{height:"50px"},onClick:t[1]||(t[1]=a=>w("create"))},null,8,ve)):m("",!0)]),r.value==="create"?(i(),l("div",ye,[e("div",null,[e("ul",he,[(i(),l(S,null,M(v,a=>e("li",{class:U(a.isActive?"active":"")},u(a.text),3)),64))])]),e("div",_e,[o.value===0?(i(),l("div",be,[e("input",{class:"addFile",type:"file",onChange:L},null,32),xe])):m("",!0),o.value===1?(i(),l("div",ke,[we,e("input",{type:"text",id:"fname",onChange:N,name:"fname"},null,32)])):m("",!0),o.value===2?(i(),l("div",Ce,[e("div",Pe,[Te,e("div",Ie,[V(e("input",{class:"tgl tgl-ios",id:"cb2-7",type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=a=>h.value=a)},null,512),[[X,h.value]]),De])]),h.value?(i(),l("div",Ne,[Se,e("input",{type:"number",onKeydown:Z(P,["enter"]),onChange:t[3]||(t[3]=a=>{d.value.price=Number(a.target.value),console.log(d.value.price)})},null,32)])):m("",!0),Le,e("div",null,[e("button",{class:"mypost-button",style:{marginTop:"30px"},onClick:P},"Создать")])])):m("",!0),o.value===3?(i(),l("div",Ae,[C.value?(i(),l("div",$e,[e("img",{src:g(le)},null,8,Ve)])):(i(),l("div",Be,[e("img",{src:g(ie)},null,8,Me),ze]))])):m("",!0)]),k.value?(i(),l("div",Ue,[e("button",{class:"mypost-button",style:{marginTop:"30px"},onClick:A},"Дальше")])):m("",!0)])):m("",!0),r.value==="posts"?(i(),l("div",je,[(i(!0),l(S,null,M(g(s).posts,a=>{var T,I,$;return i(),l("div",{key:a.ID,style:{width:"100%"}},[e("div",Fe,[e("div",Re,[e("img",{src:a.AvatarURL,style:{width:"60px",height:"60px",padding:"5px",borderRadius:"30px"}},null,8,We),e("span",Oe,u(a.OwnerName),1)]),e("div",{class:"postImage",style:R({height:"250px",width:"100%",position:"relative",filter:K(a.OwnerID,a.ID)?"blur(25px)":"blur(0px)"})},[e("img",{src:O(a.ImagePath),style:{height:"inherit",width:"100%",backgroundRepeat:"no-repeat",backgroundSize:"cover"}},null,8,Ge)],4),e("div",Ke,[e("span",qe,u(a.Description),1)]),a.IsPrivate&&a.OwnerID!==((T=g(s).user)==null?void 0:T.id)&&((I=g(s).boughtPosts)==null?void 0:I.findIndex(B=>B.PostID==a.ID))==-1?(i(),l("div",Ye,[e("span",Ee,"🍆"+u(a.Price),1),e("button",{class:"boost-purchase-button",onClick:B=>z("unlock",a.ID,a.Price)},"Unlock",8,He)])):m("",!0),e("div",Je,[e("span",Qe,"Donated: 🍆"+u(a.Donated),1),a.OwnerID!==(($=g(s).user)==null?void 0:$.id)?(i(),l("button",{key:0,class:"boost-purchase-button",onClick:B=>z("donate",a.ID,a.Price)},"Donate",8,Xe)):m("",!0)])])])}),128))])):m("",!0),e("div",{class:U(["boost-purchase-popup",{visible:_.value=="unlock"||_.value=="donate"}]),onClick:t[6]||(t[6]=()=>{_.value="close"})},[e("div",Ze,[e("div",et,[e("h2",null,u(_.value=="unlock"?"Unlock post?":"Donate post?"),1),e("button",{class:"close-button",onClick:t[4]||(t[4]=()=>{_.value="close"})},st)]),_.value=="unlock"?(i(),l("div",at,[nt,e("p",null,"🍆"+u(y.value.price),1),e("button",{class:"boost-purchase-button",style:{width:"100%"},onClick:G},"Unlock post")])):(i(),l("div",ot,[e("div",it,[V(e("input",{type:"range",min:"0",max:(c=g(s).user)==null?void 0:c.balance,class:"slider",id:"myRange","onUpdate:modelValue":t[5]||(t[5]=a=>b.value=a)},null,8,lt),[[ee,b.value]])]),e("p",null,"🍆"+u(b.value),1),b.value>0?(i(),l("button",{key:0,class:"boost-purchase-button",style:{width:"100%"},onClick:Y},"Donate post")):m("",!0)]))])],2),r.value=="myposts"?(i(),l("div",ct,[te(me),(i(),l(S,null,M(D,a=>{var T,I;return e("div",{class:"postProfile",onClick:t[7]||(t[7]=()=>{})},[rt,e("div",ut,[e("div",null,[ae(u(n.$t("boosts.multitap.name")),1),e("span",dt,u((T=g(s).boosts)==null?void 0:T.current_mine_level)+" "+u(n.$t("boosts.level")),1)]),e("div",pt,"🍆 "+u((I=g(s).boosts)==null?void 0:I.mine_level_price.toLocaleString()),1)])])}),64))])):m("",!0)],64)}}}),gt=W(mt,[["__scopeId","data-v-1b0c4ad3"]]);export{gt as default};
