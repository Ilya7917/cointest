import{j as L,u,k as _,D as S,d as b,E as x,g as v,h as $,q as B,c,a as s,t as l,F as I,p as D,b as M,x as T,v as A,m as P,o as r,y as z,z as E,_ as R}from"./index-B_NR0rph.js";const V="/assets/sprite-BbW-irAG.svg",j=L("channels",{state:()=>({channels:null,myChannels:null}),getters:{getChannels:n=>n.myChannels},actions:{async fetchChannels(){const n=u(),e=await _.get("https://taptaptap.testcoin.uk/channels",{headers:{"x-api-key":n.getAccessToken}});this.channels=e.data,console.log(e.data)},async startChannel(n){const e=u(),p=await _.post("https://taptaptap.testcoin.uk/initUserChannel",{id:n.id},{headers:{"x-api-key":e.getAccessToken}});return this.myChannels=p.data.channels,!0},async getMyChannels(){const n=u(),e=await _.get("https://taptaptap.testcoin.uk/getMyChannels",{headers:{"x-api-key":n.getAccessToken}});this.myChannels=S(e.data.channels)}}}),C=n=>(z("data-v-f8ed0786"),n=n(),E(),n),F=V+"#chevron-right",N={class:"telegram-channels"},O={class:"earn-title"},U={class:"channels-title"},q={class:"channels-list"},G=["onClick"],W={class:"channel-info"},H={class:"name"},J={class:"channel-action"},K={key:0,class:"reward"},Q={key:1,class:"reward"},X=C(()=>s("svg",{class:"arrow"},[s("use",{"xlink:href":F})],-1)),Y={class:"popup-content"},Z=C(()=>s("h2",null,"Earn coins",-1)),ee=C(()=>s("svg",{class:"close-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"16px",height:"16px"},[s("path",{d:"M 7 4 C 6.744125 4 6.4879687 4.0974687 6.2929688 4.2929688 L 4.2929688 6.2929688 C 3.9019687 6.6839688 3.9019687 7.3170313 4.2929688 7.7070312 L 11.585938 15 L 4.2929688 22.292969 C 3.9019687 22.683969 3.9019687 23.317031 4.2929688 23.707031 L 6.2929688 25.707031 C 6.6839688 26.098031 7.3170313 26.098031 7.7070312 25.707031 L 15 18.414062 L 22.292969 25.707031 C 22.682969 26.098031 23.317031 26.098031 23.707031 25.707031 L 25.707031 23.707031 C 26.098031 23.316031 26.098031 22.682969 25.707031 22.292969 L 18.414062 15 L 25.707031 7.7070312 C 26.098031 7.3170312 26.098031 6.6829688 25.707031 6.2929688 L 23.707031 4.2929688 C 23.316031 3.9019687 22.682969 3.9019687 22.292969 4.2929688 L 15 11.585938 L 7.7070312 4.2929688 C 7.5115312 4.0974687 7.255875 4 7 4 z"})],-1)),se=[ee],te={class:"popup-body"},ne=b({__name:"Channels",setup(n){const e=j(),p=x(),i=v(!1),m=v(!1),a=v({id:0,title:"",reward:0,invite_link:"",status:""});$(()=>{e.fetchChannels(),e.getMyChannels()});const y=t=>{var d,h;if(((d=e.myChannels)==null?void 0:d.length)!=null&&((h=e.myChannels)==null?void 0:h.length)>0){let o=e.myChannels.findIndex(g=>g.ChannelID==t.id);console.log(e.myChannels[0].ChannelID),o!=-1&&(a.value.status=e.myChannels[o].Status)}a.value.id=t.id,a.value.reward=t.reward,a.value.title=t.title,a.value.invite_link=t.invite_link,i.value=!1,m.value=!1,setTimeout(w,100),console.log(i)},f=()=>{const t={id:a.value.id,title:a.value.title,invite_link:a.value.invite_link,reward:0,is_available:!0};e.startChannel(t).then(d=>{d&&(i.value=!1,p.openTelegramLink(a.value.invite_link),e.getMyChannels())})},w=()=>{i.value=!0};function k(){i.value=!1}return(t,d)=>{const h=B("click-outside");return r(),c("div",N,[s("div",O," 🤑 "+l(t.$t("earn.name")),1),s("div",U," 📢 "+l(t.$t("earn.channels")),1),s("div",q,[(r(!0),c(I,null,D(M(e).channels,o=>(r(),c("div",{key:o.id,onClick:g=>y(o),class:"channel"},[s("div",W,[s("span",H,l(o.title),1)]),s("div",J,[o.is_available?(r(),c("span",K,"🍆 "+l(o.reward.toLocaleString()),1)):(r(),c("span",Q,"💠 "+l(t.$t("earn.rewardReached")),1)),X])],8,G))),128))]),i.value?(r(),c("div",{key:0,class:T(["boost-purchase-popup",{visible:i.value}])},[A((r(),c("div",Y,[s("div",{class:"popup-header"},[Z,s("button",{class:"close-button",onClick:k},se)]),s("div",te,[s("p",null,l(t.$t("earn.selectedChannel")),1),s("p",null,"🍆"+l(a.value.reward),1),s("button",{class:"boost-purchase-button",onClick:f},l(t.$t("earn.startRewardButton")),1)])])),[[h,k]])],2)):P("",!0)])}}}),oe=R(ne,[["__scopeId","data-v-f8ed0786"]]);export{oe as default};
