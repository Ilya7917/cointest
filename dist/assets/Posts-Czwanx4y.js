import{d as j,u as F,B as H,g as p,C as J,o as i,c as l,a as e,t as u,n as R,_ as W,l as K,h as Q,b as g,m,F as S,p as M,v as V,G as X,H as Z,x as U,e as ee,A as te,f as se,y as ae,z as ne}from"./index-Di3O7hAY.js";const oe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20100%20100'%20preserveAspectRatio='xMidYMid'%20width='200'%20height='200'%20style='shape-rendering:%20auto;%20display:%20block;'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cg%3e%3cg%20transform='translate(80,50)'%3e%3cg%20transform='rotate(0)'%3e%3ccircle%20fill-opacity='1'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.875s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.875s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(71.21320343559643,71.21320343559643)'%3e%3cg%20transform='rotate(45)'%3e%3ccircle%20fill-opacity='0.875'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.75s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.75s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(50,80)'%3e%3cg%20transform='rotate(90)'%3e%3ccircle%20fill-opacity='0.75'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.625s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.625s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(28.786796564403577,71.21320343559643)'%3e%3cg%20transform='rotate(135)'%3e%3ccircle%20fill-opacity='0.625'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.5s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.5s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(20,50.00000000000001)'%3e%3cg%20transform='rotate(180)'%3e%3ccircle%20fill-opacity='0.5'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.375s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.375s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(28.78679656440357,28.786796564403577)'%3e%3cg%20transform='rotate(225)'%3e%3ccircle%20fill-opacity='0.375'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.25s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.25s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(49.99999999999999,20)'%3e%3cg%20transform='rotate(270)'%3e%3ccircle%20fill-opacity='0.25'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.125s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.125s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(71.21320343559643,28.78679656440357)'%3e%3cg%20transform='rotate(315)'%3e%3ccircle%20fill-opacity='0.125'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='0s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='0s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/g%3e%3c!--%20[ldio]%20generated%20by%20https://loading.io%20--%3e%3c/svg%3e",ie="/assets/acceptet-BiKVjkxi.svg",le="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='80px'%20height='80px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15%2012L12%2012M12%2012L9%2012M12%2012L12%209M12%2012L12%2015'%20stroke='%23878787'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M7%203.33782C8.47087%202.48697%2010.1786%202%2012%202C17.5228%202%2022%206.47715%2022%2012C22%2017.5228%2017.5228%2022%2012%2022C6.47715%2022%202%2017.5228%202%2012C2%2010.1786%202.48697%208.47087%203.33782%207'%20stroke='%23878787'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3c/svg%3e",ce={class:"balance-panel"},re={class:"balance-hint"},ue={class:"balance__wrapper"},de=j({__name:"DonateBalance",setup(x){var d;const s=F(),r=H(()=>{var v;const o=((v=s.user)==null?void 0:v.posts_balance.toString().length)||0;return o<5?"44px":o<8?"39px":o<12?"34px":o<15?"29px":"24px"}),h=p(((d=s.user)==null?void 0:d.posts_balance)||0);function k(o){const v=h.value,I=o-v;let w=900;I<=10&&(w=300);const L=performance.now();function D(A){const C=A-L,N=Math.min(C/w,1);h.value=Math.round(v+I*N),N<1&&requestAnimationFrame(D)}requestAnimationFrame(D)}return J(()=>{var o;return((o=s.user)==null?void 0:o.posts_balance)??0},o=>{k(o)},{immediate:!0}),(o,v)=>(i(),l("div",ce,[e("span",re,u(o.$t("account.yourDonateBalance")),1),e("div",ue,[e("div",{class:"balance",style:R({fontSize:r.value})},u(h.value.toLocaleString()),5)])]))}}),pe=W(de,[["__scopeId","data-v-9240ccbf"]]),f=x=>(ae("data-v-fac5432f"),x=x(),ne(),x),me=f(()=>e("div",{class:"Bg"},null,-1)),fe={class:"navMenu"},ge=["src"],ve={key:0,class:"createPostMenu"},ye={id:"progressbar"},he={class:"createForm"},_e={key:0,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},be=f(()=>e("span",{style:{fontWeight:"bold",marginTop:"15px"}},"⚠️ Добавить можно только 1 изображение",-1)),xe={key:1,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},ke=f(()=>e("label",{for:"fname"},"Описание(не обязательно)",-1)),we={key:2,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},Ce={style:{display:"flex",alignItems:"center"}},Pe=f(()=>e("span",{style:{fontSize:"15px",fontWeight:"bold"}},"Платный пост (не обязательно)",-1)),Te={class:"checkbox-wrapper-7",style:{marginLeft:"20px"}},Ie=f(()=>e("label",{class:"tgl-btn",for:"cb2-7"},null,-1)),De={key:0,style:{marginTop:"50px",textAlign:"center"}},Ne=f(()=>e("span",{style:{fontSize:"15px",fontWeight:"bold"}},"Цена за разблокировку:",-1)),Se=f(()=>e("div",{style:{marginTop:"50px",textAlign:"center"}},[e("span",{style:{fontSize:"15px",fontWeight:"bold"}},"Стоимость создания поста: 5000🍆")],-1)),Le={key:3},Ae={key:0,style:{display:"flex",flexDirection:"column"}},Be=["src"],Me=f(()=>e("span",{style:{fontSize:"17px",fontWeight:"bold",marginTop:"10px"}},"Подождите, мы загружаем ваш пост...",-1)),ze={key:1},$e=["src"],Ve={key:0,style:{display:"flex",justifyContent:"center"}},Ue={key:1,class:"boosts"},je={class:"post"},Fe={class:"ownerData"},Re=["src"],We={style:{fontSize:"25px",marginLeft:"15px"}},Oe=["src"],Ge={class:"postDescription",style:{height:"50px",alignItems:"center",display:"flex"}},qe={style:{fontSize:"25px"}},Ye={key:0,class:"unlock",style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px"}},Ee={style:{fontSize:"25px"}},He=["onClick"],Je={class:"donations",style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px"}},Ke={style:{fontSize:"25px"}},Qe=["onClick"],Xe={class:"popup-content"},Ze={class:"popup-header"},et=f(()=>e("svg",{class:"close-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"16px",height:"16px"},[e("path",{d:"M 7 4 C 6.744125 4 6.4879687 4.0974687 6.2929688 4.2929688 L 4.2929688 6.2929688 C 3.9019687 6.6839688 3.9019687 7.3170313 4.2929688 7.7070312 L 11.585938 15 L 4.2929688 22.292969 C 3.9019687 22.683969 3.9019687 23.317031 4.2929688 23.707031 L 6.2929688 25.707031 C 6.6839688 26.098031 7.3170313 26.098031 7.7070312 25.707031 L 15 18.414062 L 22.292969 25.707031 C 22.682969 26.098031 23.317031 26.098031 23.707031 25.707031 L 25.707031 23.707031 C 26.098031 23.316031 26.098031 22.682969 25.707031 22.292969 L 18.414062 15 L 25.707031 7.7070312 C 26.098031 7.3170312 26.098031 6.6829688 25.707031 6.2929688 L 23.707031 4.2929688 C 23.316031 3.9019687 22.682969 3.9019687 22.292969 4.2929688 L 15 11.585938 L 7.7070312 4.2929688 C 7.5115312 4.0974687 7.255875 4 7 4 z"})],-1)),tt=[et],st={key:0,class:"popup-body"},at=f(()=>e("p",null,"Price:",-1)),nt={key:1,class:"popup-body"},ot={class:"slidecontainer",style:{marginTop:"30px"}},it=["max"],lt={key:2,class:"myPosts"},ct=f(()=>e("div",{class:"icon-box"},"👆",-1)),rt={class:"text-container"},ut={class:"badge"},dt={class:"price"},pt=j({__name:"Posts",setup(x){K();const s=F();s.getBoosts(),p(!1),p(!1);const r=p("posts"),h=p(!1),k=p(!1),d=p({image:null,isPrivate:!1,description:"",price:0}),o=p(0),v=[{id:0,isActive:!0,text:"Add image"},{id:1,isActive:!1,text:"Write description"},{id:2,isActive:!1,text:"Choose Details"}];Q(()=>{r.value="posts",s.getMyBoughtPosts(),s.getPosts(),console.log(r.value)}),p({id:0,price:1e3});const I=[{id:0,ownerName:"Jack",ownerAvatar:"https://www.pinclipart.com/picdir/big/165-1653686_female-user-icon-png-download-user-colorful-icon.png",image:"https://goombastomp.com/wp-content/uploads/2022/07/image-34.png",description:"Cat from stray",donation:5e3,isPrivate:!1},{id:1,ownerName:"Ashley",ownerAvatar:"https://www.pinclipart.com/picdir/big/165-1653686_female-user-icon-png-download-user-colorful-icon.png",image:"https://goombastomp.com/wp-content/uploads/2022/07/image-34.png",description:"Cat from stray",donation:1582,isPrivate:!0},{id:2,ownerName:"Miki115",ownerAvatar:"https://www.pinclipart.com/picdir/big/165-1653686_female-user-icon-png-download-user-colorful-icon.png",image:"https://goombastomp.com/wp-content/uploads/2022/07/image-34.png",description:"Cat from stray",donation:113,isPrivate:!0}];p({id:0});const w=n=>{n!=r.value&&(r.value=n,console.log(n))},L=n=>{const c=n.target.files;c&&c.length>0&&(d.value.image=c[0],k.value=!0)},D=n=>{console.log(1);const c=n.target.value;c&&(d.value.description=c),console.log(d)},A=()=>{o.value!==0&&(k.value=!1),o.value++,v[o.value].isActive=!0},C=p(!1),N=()=>{if(d.value.isPrivate=h.value,d.value.image!=null){const n={image:d.value.image,isPrivate:d.value.isPrivate,description:d.value.description,price:d.value.price};o.value++,s.createPost(n).then(t=>{t&&setTimeout(()=>{o.value=0,r.value="posts",C.value=!0,C.value=!1,s.getPosts()},2500)})}else console.error("No file selected")},O=n=>`https://taptaptap.testcoin.uk/uploads/${n}`,_=p("close"),y=p({id:0,price:0}),z=(n,t,c)=>{switch(n){case"unlock":_.value=n,y.value.id=t,y.value.price=c;break;case"donate":y.value.id=t,_.value=n;break}},G=()=>{console.log(y.value.id),s.unlockPost(y.value.id).then(n=>{if(n&&s.posts!=null){let t=s.posts.findIndex(c=>c.ID==y.value.id);t!=-1&&(s.posts[t].IsPrivate=!1,s.getMyBoughtPosts())}})},q=(n,t)=>{if(s.user)return n!==s.user.id?!Y(t):!1},Y=n=>s.boughtPosts!=null&&s.boughtPosts.findIndex(c=>c.ID==n)!=-1,b=p(0),E=()=>{s.user&&(s.user.balance<Number(b.value)&&te().showAlert("Недостаточно средств на счету"),s.donatePost(y.value.id,b.value).then(n=>{if(n&&s.posts!=null){let t=s.posts.findIndex(c=>c.ID==y.value.id);t!=-1&&(s.posts[t].Donated+=Number(b.value))}}))};return(n,t)=>{var c;return i(),l(S,null,[me,e("div",fe,[e("button",{class:"mypost-button",onClick:t[0]||(t[0]=a=>w(r.value=="create"||r.value=="myposts"?"posts":"myposts"))},u(r.value=="create"?"Posts":r.value=="posts"?"My posts":"Posts"),1),r.value!=="create"?(i(),l("img",{key:0,src:g(le),alt:"Your Icon",style:{height:"50px"},onClick:t[1]||(t[1]=a=>w("create"))},null,8,ge)):m("",!0)]),r.value==="create"?(i(),l("div",ve,[e("div",null,[e("ul",ye,[(i(),l(S,null,M(v,a=>e("li",{class:U(a.isActive?"active":"")},u(a.text),3)),64))])]),e("div",he,[o.value===0?(i(),l("div",_e,[e("input",{class:"addFile",type:"file",onChange:L},null,32),be])):m("",!0),o.value===1?(i(),l("div",xe,[ke,e("input",{type:"text",id:"fname",onChange:D,name:"fname"},null,32)])):m("",!0),o.value===2?(i(),l("div",we,[e("div",Ce,[Pe,e("div",Te,[V(e("input",{class:"tgl tgl-ios",id:"cb2-7",type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=a=>h.value=a)},null,512),[[X,h.value]]),Ie])]),h.value?(i(),l("div",De,[Ne,e("input",{type:"number",onChange:t[3]||(t[3]=a=>{d.value.price=Number(a.target.value),console.log(d.value.price)})},null,32)])):m("",!0),Se,e("div",null,[e("button",{class:"mypost-button",style:{marginTop:"30px"},onClick:N},"Создать")])])):m("",!0),o.value===3?(i(),l("div",Le,[C.value?(i(),l("div",ze,[e("img",{src:g(ie)},null,8,$e)])):(i(),l("div",Ae,[e("img",{src:g(oe)},null,8,Be),Me]))])):m("",!0)]),k.value?(i(),l("div",Ve,[e("button",{class:"mypost-button",style:{marginTop:"30px"},onClick:A},"Дальше")])):m("",!0)])):m("",!0),r.value==="posts"?(i(),l("div",Ue,[(i(!0),l(S,null,M(g(s).posts,a=>{var P,T,$;return i(),l("div",{key:a.ID,style:{width:"100%"}},[e("div",je,[e("div",Fe,[e("img",{src:a.AvatarURL,style:{width:"60px",height:"60px",padding:"5px",borderRadius:"30px"}},null,8,Re),e("span",We,u(a.OwnerName),1)]),e("div",{class:"postImage",style:R({height:"250px",width:"100%",position:"relative",filter:q(a.OwnerID,a.ID)?"blur(25px)":"blur(0px)"})},[e("img",{src:O(a.ImagePath),style:{height:"inherit",width:"100%",backgroundRepeat:"no-repeat",backgroundSize:"cover"}},null,8,Oe)],4),e("div",Ge,[e("span",qe,u(a.Description),1)]),a.IsPrivate&&a.OwnerID!==((P=g(s).user)==null?void 0:P.id)&&((T=g(s).boughtPosts)==null?void 0:T.findIndex(B=>B.PostID==a.ID))==-1?(i(),l("div",Ye,[e("span",Ee,"🍆"+u(a.Price),1),e("button",{class:"boost-purchase-button",onClick:B=>z("unlock",a.ID,a.Price)},"Unlock",8,He)])):m("",!0),e("div",Je,[e("span",Ke,"Donated: 🍆"+u(a.Donated),1),a.OwnerID!==(($=g(s).user)==null?void 0:$.id)?(i(),l("button",{key:0,class:"boost-purchase-button",onClick:B=>z("donate",a.ID,a.Price)},"Donate",8,Qe)):m("",!0)])])])}),128))])):m("",!0),e("div",{class:U(["boost-purchase-popup",{visible:_.value=="unlock"||_.value=="donate"}]),onClick:t[6]||(t[6]=()=>{_.value="close"})},[e("div",Xe,[e("div",Ze,[e("h2",null,u(_.value=="unlock"?"Unlock post?":"Donate post?"),1),e("button",{class:"close-button",onClick:t[4]||(t[4]=()=>{_.value="close"})},tt)]),_.value=="unlock"?(i(),l("div",st,[at,e("p",null,"🍆"+u(y.value.price),1),e("button",{class:"boost-purchase-button",style:{width:"100%"},onClick:G},"Unlock post")])):(i(),l("div",nt,[e("div",ot,[V(e("input",{type:"range",min:"0",max:(c=g(s).user)==null?void 0:c.balance,class:"slider",id:"myRange","onUpdate:modelValue":t[5]||(t[5]=a=>b.value=a)},null,8,it),[[Z,b.value]])]),e("p",null,"🍆"+u(b.value),1),b.value>0?(i(),l("button",{key:0,class:"boost-purchase-button",style:{width:"100%"},onClick:E},"Donate post")):m("",!0)]))])],2),r.value=="myposts"?(i(),l("div",lt,[ee(pe),(i(),l(S,null,M(I,a=>{var P,T;return e("div",{class:"postProfile",onClick:t[7]||(t[7]=()=>{})},[ct,e("div",rt,[e("div",null,[se(u(n.$t("boosts.multitap.name")),1),e("span",ut,u((P=g(s).boosts)==null?void 0:P.current_mine_level)+" "+u(n.$t("boosts.level")),1)]),e("div",dt,"🍆 "+u((T=g(s).boosts)==null?void 0:T.mine_level_price.toLocaleString()),1)])])}),64))])):m("",!0)],64)}}}),ft=W(pt,[["__scopeId","data-v-fac5432f"]]);export{ft as default};
