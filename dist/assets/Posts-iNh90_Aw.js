import{d as U,u as V,B as Y,g as f,C as H,o as a,c as i,a as e,t as m,n as R,_ as W,l as J,h as Q,b as h,m as r,F as L,p as z,v as j,G as X,H as Z,I as ee,x as F,e as te,A as se,y as ne,z as ae}from"./index-CPofHpa-.js";const ie="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20100%20100'%20preserveAspectRatio='xMidYMid'%20width='200'%20height='200'%20style='shape-rendering:%20auto;%20display:%20block;'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cg%3e%3cg%20transform='translate(80,50)'%3e%3cg%20transform='rotate(0)'%3e%3ccircle%20fill-opacity='1'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.875s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.875s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(71.21320343559643,71.21320343559643)'%3e%3cg%20transform='rotate(45)'%3e%3ccircle%20fill-opacity='0.875'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.75s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.75s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(50,80)'%3e%3cg%20transform='rotate(90)'%3e%3ccircle%20fill-opacity='0.75'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.625s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.625s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(28.786796564403577,71.21320343559643)'%3e%3cg%20transform='rotate(135)'%3e%3ccircle%20fill-opacity='0.625'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.5s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.5s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(20,50.00000000000001)'%3e%3cg%20transform='rotate(180)'%3e%3ccircle%20fill-opacity='0.5'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.375s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.375s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(28.78679656440357,28.786796564403577)'%3e%3cg%20transform='rotate(225)'%3e%3ccircle%20fill-opacity='0.375'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.25s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.25s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(49.99999999999999,20)'%3e%3cg%20transform='rotate(270)'%3e%3ccircle%20fill-opacity='0.25'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.125s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.125s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(71.21320343559643,28.78679656440357)'%3e%3cg%20transform='rotate(315)'%3e%3ccircle%20fill-opacity='0.125'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='0s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='0s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/g%3e%3c!--%20[ldio]%20generated%20by%20https://loading.io%20--%3e%3c/svg%3e",oe="/assets/acceptet-BiKVjkxi.svg",le="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='80px'%20height='80px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M15%2012L12%2012M12%2012L9%2012M12%2012L12%209M12%2012L12%2015'%20stroke='%23878787'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M7%203.33782C8.47087%202.48697%2010.1786%202%2012%202C17.5228%202%2022%206.47715%2022%2012C22%2017.5228%2017.5228%2022%2012%2022C6.47715%2022%202%2017.5228%202%2012C2%2010.1786%202.48697%208.47087%203.33782%207'%20stroke='%23878787'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3c/svg%3e",ce={class:"balance-panel"},re={class:"balance-hint"},ue={class:"balance__wrapper"},de=U({__name:"DonateBalance",setup(k){var p;const s=V(),d=Y(()=>{var g;const l=((g=s.user)==null?void 0:g.posts_balance.toString().length)||0;return l<5?"44px":l<8?"39px":l<12?"34px":l<15?"29px":"24px"}),_=f(((p=s.user)==null?void 0:p.posts_balance)||0);function C(l){const g=_.value,w=l-g;let D=900;w<=10&&(D=300);const M=performance.now();function S(P){const N=P-M,I=Math.min(N/D,1);_.value=Math.round(g+w*I),I<1&&requestAnimationFrame(S)}requestAnimationFrame(S)}return H(()=>{var l;return((l=s.user)==null?void 0:l.posts_balance)??0},l=>{C(l)},{immediate:!0}),(l,g)=>(a(),i("div",ce,[e("span",re,m(l.$t("account.yourDonateBalance")),1),e("div",ue,[e("div",{class:"balance",style:R({fontSize:d.value})},m(_.value.toLocaleString()),5)])]))}}),pe=W(de,[["__scopeId","data-v-9240ccbf"]]),v=k=>(ne("data-v-408e141a"),k=k(),ae(),k),fe=v(()=>e("div",{class:"Bg"},null,-1)),me={class:"navMenu"},ve=["src"],ge={key:0,class:"createPostMenu"},ye={id:"progressbar"},he={class:"createForm"},_e={key:0,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},xe=v(()=>e("span",{style:{fontWeight:"bold",marginTop:"15px"}},"⚠️ Добавить можно только 1 изображение",-1)),be={key:1,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},ke=v(()=>e("label",{for:"fname"},"Описание(не обязательно)",-1)),Ce={key:2,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},we={style:{display:"flex",alignItems:"center"}},Pe=v(()=>e("span",{style:{fontSize:"15px",fontWeight:"bold"}},"Платный пост (не обязательно)",-1)),Ie={class:"checkbox-wrapper-7",style:{marginLeft:"20px"}},Te=v(()=>e("label",{class:"tgl-btn",for:"cb2-7"},null,-1)),De={key:0,style:{marginTop:"50px",textAlign:"center"}},Se=v(()=>e("span",{style:{fontSize:"15px",fontWeight:"bold"}},"Цена за разблокировку:",-1)),Ne=v(()=>e("div",{style:{marginTop:"50px",textAlign:"center"}},[e("span",{style:{fontSize:"15px",fontWeight:"bold"}},"Стоимость создания поста: 5000🍆")],-1)),Le={key:3},Me={key:0,style:{display:"flex",flexDirection:"column"}},Be=["src"],Ae=v(()=>e("span",{style:{fontSize:"17px",fontWeight:"bold",marginTop:"10px"}},"Подождите, мы загружаем ваш пост...",-1)),ze={key:1},$e=["src"],je={key:0,style:{display:"flex",justifyContent:"center"}},Fe={key:1,class:"boosts"},Ue={class:"post"},Ve={class:"ownerData"},Re=["src"],We={style:{fontSize:"25px",marginLeft:"15px"}},Oe=["src"],Ge={class:"postDescription",style:{height:"50px",alignItems:"center",display:"flex"}},Ke={style:{fontSize:"25px"}},qe={key:0,class:"unlock",style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px"}},Ee={style:{fontSize:"25px"}},Ye=["onClick"],He={class:"donations",style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px"}},Je={style:{fontSize:"25px"}},Qe=["onClick"],Xe={class:"popup-content"},Ze={class:"popup-header"},et=v(()=>e("svg",{class:"close-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"16px",height:"16px"},[e("path",{d:"M 7 4 C 6.744125 4 6.4879687 4.0974687 6.2929688 4.2929688 L 4.2929688 6.2929688 C 3.9019687 6.6839688 3.9019687 7.3170313 4.2929688 7.7070312 L 11.585938 15 L 4.2929688 22.292969 C 3.9019687 22.683969 3.9019687 23.317031 4.2929688 23.707031 L 6.2929688 25.707031 C 6.6839688 26.098031 7.3170313 26.098031 7.7070312 25.707031 L 15 18.414062 L 22.292969 25.707031 C 22.682969 26.098031 23.317031 26.098031 23.707031 25.707031 L 25.707031 23.707031 C 26.098031 23.316031 26.098031 22.682969 25.707031 22.292969 L 18.414062 15 L 25.707031 7.7070312 C 26.098031 7.3170312 26.098031 6.6829688 25.707031 6.2929688 L 23.707031 4.2929688 C 23.316031 3.9019687 22.682969 3.9019687 22.292969 4.2929688 L 15 11.585938 L 7.7070312 4.2929688 C 7.5115312 4.0974687 7.255875 4 7 4 z"})],-1)),tt=[et],st={key:0,class:"popup-body"},nt=v(()=>e("p",null,"Price:",-1)),at={key:1,class:"popup-body"},it={class:"slidecontainer",style:{marginTop:"30px"}},ot=["max"],lt={key:2},ct=["src"],rt={key:0},ut={key:2,class:"myPosts"},dt=["onClick"],pt=v(()=>e("div",{class:"icon-box",style:{fontSize:"27px"}},"🌐",-1)),ft={class:"text-container",style:{display:"flex",justifyContent:"center"}},mt={style:{marginLeft:"11px"}},vt=U({__name:"Posts",setup(k){J();const s=V();s.getBoosts(),f(!1),f(!1);const d=f("posts"),_=f(!1),C=f(!1),p=f({image:null,isPrivate:!1,description:"",price:0}),l=f(0),g=[{id:0,isActive:!0,text:"Add image"},{id:1,isActive:!1,text:"Write description"},{id:2,isActive:!1,text:"Choose Details"}];Q(()=>{d.value="posts",s.getMyBoughtPosts(),s.getPosts(),s.getMyPosts(),console.log(d.value)}),f({id:0,price:1e3}),f({id:0});const w=o=>{o!=d.value&&(d.value=o,console.log(o))},D=o=>{const c=o.target.files;c&&c.length>0&&(p.value.image=c[0],C.value=!0)},M=o=>{console.log(1);const c=o.target.value;c&&(p.value.description=c),console.log(p)},S=()=>{l.value!==0&&(C.value=!1),l.value++,g[l.value].isActive=!0},P=f(!1),N=()=>{if(p.value.isPrivate=_.value,p.value.image!=null){const o={image:p.value.image,isPrivate:p.value.isPrivate,description:p.value.description,price:p.value.price};l.value++,s.createPost(o).then(n=>{n&&setTimeout(()=>{l.value=0,d.value="posts",g.forEach(c=>{c.id!==0&&(c.isActive=!1)}),P.value=!0,P.value=!1,s.getPosts(),s.getMyPosts()},2500)})}else console.error("No file selected")},I=o=>`https://taptaptap.testcoin.uk/uploads/${o}`,y=f("close"),u=f({id:0,price:0,imagePath:"",decription:"",donated:0}),B=(o,n,c,t,b,T)=>{y.value=o,u.value.id=n,u.value.price=c,u.value.imagePath=t!==null?t:"",u.value.decription=b!==null?b:"",u.value.donated=T!==null?T:0},O=()=>{console.log(u.value.id),s.unlockPost(u.value.id).then(o=>{if(o&&s.posts!=null){let n=s.posts.findIndex(c=>c.ID==u.value.id);n!=-1&&(s.posts[n].IsPrivate=!1,s.getMyBoughtPosts())}})},G=(o,n)=>{if(s.user)return o!==s.user.id?!K(n):!1},K=o=>s.boughtPosts!=null&&s.boughtPosts.findIndex(c=>c.ID==o)!=-1,x=f(0),q=()=>{s.user&&(s.user.balance<Number(x.value)&&se().showAlert("Недостаточно средств на счету"),s.donatePost(u.value.id,x.value).then(o=>{if(o&&s.posts!=null){let n=s.posts.findIndex(c=>c.ID==u.value.id);n!=-1&&(s.posts[n].Donated+=Number(x.value))}}))},E=o=>{switch(o){case"unlock":return"Unlock post?";case"donate":return"Donate post?";case"visible":return`Post: ${u.value.id}`}};return(o,n)=>{var c;return a(),i(L,null,[fe,e("div",me,[e("button",{class:"mypost-button",onClick:n[0]||(n[0]=t=>w(d.value=="create"||d.value=="myposts"?"posts":"myposts"))},m(d.value=="create"?"Posts":d.value=="posts"?"My posts":"Posts"),1),d.value!=="create"?(a(),i("img",{key:0,src:h(le),alt:"Your Icon",style:{height:"50px"},onClick:n[1]||(n[1]=t=>w("create"))},null,8,ve)):r("",!0)]),d.value==="create"?(a(),i("div",ge,[e("div",null,[e("ul",ye,[(a(),i(L,null,z(g,t=>e("li",{class:F(t.isActive?"active":"")},m(t.text),3)),64))])]),e("div",he,[l.value===0?(a(),i("div",_e,[e("input",{class:"addFile",type:"file",onChange:D},null,32),xe])):r("",!0),l.value===1?(a(),i("div",be,[ke,e("input",{type:"text",id:"fname",onChange:M,name:"fname"},null,32)])):r("",!0),l.value===2?(a(),i("div",Ce,[e("div",we,[Pe,e("div",Ie,[j(e("input",{class:"tgl tgl-ios",id:"cb2-7",type:"checkbox","onUpdate:modelValue":n[2]||(n[2]=t=>_.value=t)},null,512),[[X,_.value]]),Te])]),_.value?(a(),i("div",De,[Se,e("input",{type:"number",onKeydown:Z(N,["enter"]),onChange:n[3]||(n[3]=t=>{p.value.price=Number(t.target.value),console.log(p.value.price)})},null,32)])):r("",!0),Ne,e("div",null,[e("button",{class:"mypost-button",style:{marginTop:"30px"},onClick:N},"Создать")])])):r("",!0),l.value===3?(a(),i("div",Le,[P.value?(a(),i("div",ze,[e("img",{src:h(oe)},null,8,$e)])):(a(),i("div",Me,[e("img",{src:h(ie)},null,8,Be),Ae]))])):r("",!0)]),C.value?(a(),i("div",je,[e("button",{class:"mypost-button",style:{marginTop:"30px"},onClick:S},"Дальше")])):r("",!0)])):r("",!0),d.value==="posts"?(a(),i("div",Fe,[(a(!0),i(L,null,z(h(s).posts,t=>{var b,T,$;return a(),i("div",{key:t.ID,style:{width:"100%"}},[e("div",Ue,[e("div",Ve,[e("img",{src:t.AvatarURL,style:{width:"60px",height:"60px",padding:"5px",borderRadius:"30px"}},null,8,Re),e("span",We,m(t.OwnerName),1)]),e("div",{class:"postImage",style:R({height:"250px",width:"100%",position:"relative",filter:G(t.OwnerID,t.ID)?"blur(25px)":"blur(0px)"})},[e("img",{src:I(t.ImagePath),style:{height:"inherit",width:"100%",backgroundRepeat:"no-repeat",backgroundSize:"cover",objectFit:"contain"}},null,8,Oe)],4),e("div",Ge,[e("span",Ke,m(t.Description),1)]),t.IsPrivate&&t.OwnerID!==((b=h(s).user)==null?void 0:b.id)&&((T=h(s).boughtPosts)==null?void 0:T.findIndex(A=>A.PostID==t.ID))==-1?(a(),i("div",qe,[e("span",Ee,"🍆"+m(t.Price),1),e("button",{class:"boost-purchase-button",onClick:A=>B("unlock",t.ID,t.Price,null,null,null)},"Unlock",8,Ye)])):r("",!0),e("div",He,[e("span",Je,"Donated: 🍆"+m(t.Donated),1),t.OwnerID!==(($=h(s).user)==null?void 0:$.id)?(a(),i("button",{key:0,class:"boost-purchase-button",onClick:A=>B("donate",t.ID,t.Price,null,null,null)},"Donate",8,Qe)):r("",!0)])])])}),128))])):r("",!0),e("div",{class:F(["boost-purchase-popup",{visible:y.value=="unlock"||y.value=="donate"||y.value=="visible"}]),onClick:n[6]||(n[6]=()=>{y.value="close"})},[e("div",Xe,[e("div",Ze,[e("h2",null,m(E(y.value)),1),e("button",{class:"close-button",onClick:n[4]||(n[4]=()=>{y.value="close"})},tt)]),y.value=="unlock"?(a(),i("div",st,[nt,e("p",null,"🍆"+m(u.value.price),1),e("button",{class:"boost-purchase-button",style:{width:"100%"},onClick:O},"Unlock post")])):r("",!0),y.value=="donate"?(a(),i("div",at,[e("div",it,[j(e("input",{type:"range",min:"0",max:(c=h(s).user)==null?void 0:c.balance,class:"slider",id:"myRange","onUpdate:modelValue":n[5]||(n[5]=t=>x.value=t)},null,8,ot),[[ee,x.value]])]),e("p",null,"🍆"+m(x.value),1),x.value>0?(a(),i("button",{key:0,class:"boost-purchase-button",style:{width:"100%"},onClick:q},"Donate post")):r("",!0)])):r("",!0),y.value=="visible"?(a(),i("div",lt,[e("img",{src:I(u.value.imagePath),style:{height:"200px",width:"100%",backgroundRepeat:"no-repeat",objectFit:"contain"}},null,8,ct),u.value.decription!==""?(a(),i("p",rt,m(u.value.decription),1)):r("",!0),e("p",null,"Donated: 🍆"+m(u.value.donated),1)])):r("",!0)])],2),d.value=="myposts"?(a(),i("div",ut,[te(pe),(a(!0),i(L,null,z(h(s).myPosts,t=>(a(),i("div",{class:"postProfile",onClick:b=>B("visible",t.ID,t.Price,t.ImagePath,t.Description,t.Donated)},[pt,e("div",ft,[e("span",mt,"Пост: "+m(t.ID),1)])],8,dt))),256))])):r("",!0)],64)}}}),yt=W(vt,[["__scopeId","data-v-408e141a"]]);export{yt as default};
