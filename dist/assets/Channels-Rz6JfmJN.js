import{j as L,u as p,k as v,d as b,D as S,g as _,h as x,q as $,c as r,a as e,t as i,F as B,p as I,b as M,x as T,v as A,m as D,o as d,y as P,z,_ as V}from"./index-Yf5Wuwb7.js";const j="/assets/sprite-BbW-irAG.svg",E=L("channels",{state:()=>({channels:null,myChannels:null}),actions:{async fetchChannels(){const a=p(),s=await v.get("https://taptaptap.testcoin.uk/channels",{headers:{"x-api-key":a.getAccessToken}});this.channels=s.data},async startChannel(a){const s=p(),u=await v.post("https://taptaptap.testcoin.uk/initUserChannel",{id:a.id},{headers:{"x-api-key":s.getAccessToken}});return this.myChannels=u.data.channels,!0},async getMyChannels(){const a=p(),s=await v.get("https://taptaptap.testcoin.uk/getMyChannels",{headers:{"x-api-key":a.getAccessToken}});this.myChannels=s.data.channels}}}),C=a=>(P("data-v-2032c16b"),a=a(),z(),a),F=j+"#chevron-right",N={class:"telegram-channels"},O={class:"earn-title"},R={class:"channels-title"},U={class:"channels-list"},q=["onClick"],G={class:"channel-info"},W={class:"name"},H={class:"channel-action"},J={key:0,class:"reward"},K={key:1,class:"reward"},Q=C(()=>e("svg",{class:"arrow"},[e("use",{"xlink:href":F})],-1)),X={class:"popup-content"},Y=C(()=>e("h2",null,"Earn coins",-1)),Z=C(()=>e("svg",{class:"close-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"16px",height:"16px"},[e("path",{d:"M 7 4 C 6.744125 4 6.4879687 4.0974687 6.2929688 4.2929688 L 4.2929688 6.2929688 C 3.9019687 6.6839688 3.9019687 7.3170313 4.2929688 7.7070312 L 11.585938 15 L 4.2929688 22.292969 C 3.9019687 22.683969 3.9019687 23.317031 4.2929688 23.707031 L 6.2929688 25.707031 C 6.6839688 26.098031 7.3170313 26.098031 7.7070312 25.707031 L 15 18.414062 L 22.292969 25.707031 C 22.682969 26.098031 23.317031 26.098031 23.707031 25.707031 L 25.707031 23.707031 C 26.098031 23.316031 26.098031 22.682969 25.707031 22.292969 L 18.414062 15 L 25.707031 7.7070312 C 26.098031 7.3170312 26.098031 6.6829688 25.707031 6.2929688 L 23.707031 4.2929688 C 23.316031 3.9019687 22.682969 3.9019687 22.292969 4.2929688 L 15 11.585938 L 7.7070312 4.2929688 C 7.5115312 4.0974687 7.255875 4 7 4 z"})],-1)),ee=[Z],se={class:"popup-body"},te=b({__name:"Channels",setup(a){const s=E(),u=S(),l=_(!1),y=_(!1),n=_({id:0,title:"",reward:0,invite_link:"",status:""});x(()=>{s.fetchChannels(),s.getMyChannels()});const f=t=>{var c,h;if(((c=s.myChannels)==null?void 0:c.length)!=null&&((h=s.myChannels)==null?void 0:h.length)>0){let o=s.myChannels.findIndex(g=>g.channelId==t.id);o!=-1&&(n.value.status=s.myChannels[o].status)}n.value.id=t.id,n.value.reward=t.reward,n.value.title=t.title,n.value.invite_link=t.invite_link,l.value=!1,y.value=!1,setTimeout(w,100),console.log(l)},k=()=>{const t={id:n.value.id,title:n.value.title,invite_link:n.value.invite_link,reward:0,is_available:!0};s.startChannel(t).then(c=>{c&&(l.value=!1,u.openTelegramLink(n.value.invite_link),s.getMyChannels())})},w=()=>{l.value=!0};function m(){l.value=!1}return(t,c)=>{const h=$("click-outside");return d(),r("div",N,[e("div",O," ðŸ¤‘ "+i(t.$t("earn.name")),1),e("div",R," ðŸ“¢ "+i(t.$t("earn.channels")),1),e("div",U,[(d(!0),r(B,null,I(M(s).channels,o=>(d(),r("div",{key:o.id,onClick:g=>f(o),class:"channel"},[e("div",G,[e("span",W,i(o.title),1)]),e("div",H,[o.is_available?(d(),r("span",J,"ðŸ† "+i(o.reward.toLocaleString()),1)):(d(),r("span",K,"ðŸ’  "+i(t.$t("earn.rewardReached")),1)),Q])],8,q))),128))]),l.value?(d(),r("div",{key:0,class:T(["boost-purchase-popup",{visible:l.value}])},[A((d(),r("div",X,[e("div",{class:"popup-header"},[Y,e("button",{class:"close-button",onClick:m},ee)]),e("div",se,[e("p",null,i(t.$t("earn.selectedChannel")),1),e("p",null,"ðŸ†"+i(n.value.reward),1),e("button",{class:"boost-purchase-button",onClick:c[0]||(c[0]=o=>(n.value.status=="init",k))},i(n.value.status=="init"?"Claim":t.$t("earn.startRewardButton")),1)])])),[[h,m]])],2)):D("",!0)])}}}),ae=V(te,[["__scopeId","data-v-2032c16b"]]);export{ae as default};
