import{j as C,u as p,k as b,_ as L,y as A,b as d,c as u,e as l,t as m,n as _,F as S,p as B,x as W,I as z,m as v}from"./index-B4aDvuhY.js";const M=C("slotmachinestore",{state:()=>({reels:[],winLines:[],isSpinning:!1,isAutoSpinOn:!1,showPayLines:!1,credits:100,bet:1}),actions:{async spin(s){const t=p(),n=await b.post("https://taptaptap.testcoin.uk/spin",{bet:s},{headers:{"x-api-key":t.getAccessToken}});return n.data.sucess&&t.user!=null&&(t.user.balance-=s),n.data},async setWin(s,t){const n=p(),r=await b.post("https://taptaptap.testcoin.uk/reward",{win_amount:s,number:t},{headers:{"x-api-key":n.getAccessToken}});return console.log(r),r.data.sucess&&n.user!=null&&(n.user.withdrawal_balance+=s),r.data}}}),T="/assets/RotateEffect-CVAmP2t-.png",h=12,R=150/1.5,w=M(),x=p(),D={data(){return{xray:!1,perspective:!0,mode:"single",showSpinButtons:!0,showWinScreen:!1,bet:100,winAmount:0,showLines:!1,symbols:["üçí","üçî","üçï","üçå","ü•ë","üçç","üçâ","üçá","üçì","üçë","üçà","üçã"],currentAngles:[0,0,0,0,0],visibleSlots:[],lastWinningPattern:null,lines:[[[1,4,7,10,13],[0,3,6,9,12],[2,5,8,11,14]],[[1,3,8,9,13],[2,3,7,9,14]],[[1,4,6,10,13],[2,5,6,11,14]],[[2,3,6,9,14],[1,3,6,9,13]],[[0,3,7,9,12],[0,3,8,9,12]]],colors:[[{color:"yellow"},{color:"blue"},{color:"purple"}],[{color:"brown"},{color:"orange"}]],printingLines:[],numberInRandoms:5,ringIds:["ring1","ring2","ring3","ring4","ring5"],allSlots:[],winColors:["lightgreen","blue","lightgreen","orange","purple"],winPercents:[10,20,25,30],interval:null}},mounted(){for(let s=0;s<this.ringIds.length;s++)this.createSlots(document.getElementById(this.ringIds[s]),s+1);this.highlightVisibleSlots()},methods:{startDecrement(){this.interval||(this.interval=setInterval(()=>{this.bet-100>=100&&(this.bet-=100)},150))},startIncrement(){this.interval||(this.interval=setInterval(()=>{this.bet+=100},150),console.log(this.interval))},stopInterval(){clearInterval(this.interval),this.interval=null},createShowLine(s,t,n,r){console.log(s,t);const e=document.createElement("div");return e.className="myLine",e.style.position="absolute",e.style.top=n=="horizontal"?"65%":"50%",e.style.left="0%",e.style.width="100%",e.style.height="2px",e.style.backgroundColor=this.colors[s][t].color,e.style.transform="translateY(-50%)",n=="zigZag"&&(t==0?e.style.transform=r<=2?"rotate(45deg)":"rotate(-45deg)":e.style.transform=r<=2?"rotate(-45deg)":"rotate(45deg)"),e},showWinningLines(s){console.log(this.printingLines),s?this.lines.forEach((t,n)=>{n>1||t.forEach((r,e)=>{r.forEach((o,i)=>{let a="";n==0&&(a="horizontal"),n==1&&(a="zigZag");let g=this.createShowLine(n,e,a,i);const c=document.getElementById(this.visibleSlots[o].id);c.style.backgroundColor="gray",c.appendChild(g),this.printingLines.push(g)})})}):(this.printingLines.forEach(t=>t.remove()),this.printingLines=[],this.lines.forEach(t=>{t.forEach(n=>{n.forEach(r=>{const e=document.getElementById(this.visibleSlots[r].id);e.style.backgroundColor="white"})})})),console.log(this.printingLines)},createSlots(s,t){const n=360/h,r=this.getSeed(t);for(let e=0;e<h;e++){const o=document.createElement("div");o.className="slot",o.id=`ring${t}-slot-${e}`;const i=`rotateX(${n*e}deg) translateZ(${R}px)`;o.style.transform=i,o.innerHTML=`<p>${this.symbols[(r+e)%h]}</p>`,this.allSlots.push(o),s.appendChild(o)}},getRandom(){return Math.floor(Math.random()*this.numberInRandoms)+1},getSeed(s){return this.getRandom()},startSpinning(s){if(x.user!=null){if(x.user.balance<this.bet){A().showAlert("–£ –≤–∞—Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ üçÜ —á—Ç–æ–±—ã –∫—Ä—É—Ç–∏—Ç—å —Å–ª–æ—Ç—ã"),this.mode="single",this.showSpinButtons=!0;return}w.spin(this.bet).then(t=>{if(t.sucess){this.mode=s,this.numberInRandoms=t.number,console.log(`Number in randoms: ${this.numberInRandoms}`),this.allSlots.forEach(r=>r.remove());for(let r=0;r<this.ringIds.length;r++)this.createSlots(document.getElementById(this.ringIds[r]),r+1);this.showSpinButtons=!1,this.clearHighlight(),this.resetAnimation(),this.currentAngles=[0,0,0,0,0],this.visibleSlots=[];const n=2;for(let r=1;r<=5;r++){const e=this.getSeed(r);console.log(e);const o=-360*3+e*(360/h);this.currentAngles[r-1]=o;const i=document.getElementById("ring"+r);i.style.transition=`transform ${n+r*.5}s ease-out`,i.style.transform=`rotateX(${o}deg)`}setTimeout(()=>{this.highlightVisibleSlots(),this.ensureWinningCombination()},(n+5*.5)*1e3)}})}},resetAnimation(){for(let s=1;s<=5;s++){const t=document.getElementById("ring"+s);t.style.transition="none",t.style.transform="rotateX(0deg)",t.offsetHeight,t.style.transition=""}},clearHighlight(){this.showLines=!1,document.querySelectorAll(".slot").forEach(s=>{s.style.backgroundColor="#fff"});try{this.printingLines.forEach(s=>s.remove()),this.printingLines=[]}catch{console.error("lines array`s empty")}},highlightVisibleSlots(){const s=360/h;for(let t=1;t<=5;t++){const n=this.currentAngles[t-1],r=Math.round(-n/s)%h;[(r+h)%h,(r+1+h)%h,(r-1+h)%h].forEach(o=>{const i=document.getElementById(`ring${t}-slot-${o}`);i&&(i.style.backgroundColor="gray",this.visibleSlots.push({id:i.id,symbol:i.textContent.trim(),ring:t,position:o}))})}},ensureWinningCombination(){console.log(this.visibleSlots);let s=[];for(let t=0;t<this.lines.length;t++)this.lines[t].forEach((n,r)=>{var o,i;let e=[];for(let a=0;a<=n.length-3;a++){const g=this.visibleSlots[n[a]].symbol,c=(o=this.visibleSlots[n[a+1]])==null?void 0:o.symbol,f=(i=this.visibleSlots[n[a+2]])==null?void 0:i.symbol;if(c!==void 0&&f!==void 0&&g===c&&c===f){const I=document.getElementById(this.visibleSlots[n[a]].id),E=document.getElementById(this.visibleSlots[n[a+1]].id),k=document.getElementById(this.visibleSlots[n[a+2]].id);[I,E,k].forEach(y=>{e.includes(y)||e.push(y)})}}e.length>0&&s.push(e)});if(s.forEach((t,n)=>{t.length>=3&&t.forEach(r=>{r.style.backgroundColor=this.winColors[n]})}),s.length>0){if(this.showWinScreen=!0,this.numberInRandoms!=1){let t=this.bet/100*this.winPercents[Math.floor(Math.random()*this.winPercents.length)];if(s.length<2)this.winAmount=this.bet-t;else{const n=[20,25,30,35,40];t=this.bet/100*n[Math.floor(Math.random()*n.length)],this.winAmount=this.bet+t}}else this.winAmount=this.bet*100;return}this.mode=="auto"?this.startSpinning(this.mode):this.showSpinButtons=!0},closeWinningScreen(){w.setWin(this.winAmount,this.numberInRandoms).then(s=>{if(s.sucess)if(this.showWinScreen=!1,this.mode=="single"){this.showSpinButtons=!0;return}else this.startSpinning(this.mode)})}}},P=l("div",{class:"bg"},null,-1),V=l("img",{class:"rotateImg",src:T,style:{width:"100vh",opacity:"0.5"}},null,-1),N={style:{position:"absolute",marginTop:"-35px",display:"flex",flexDirection:"column",textAlign:"center"}},j=l("span",{style:{fontSize:"35px"}},"–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏:",-1),H={style:{fontSize:"50px"}},O=l("div",{style:{position:"absolute",width:"100%",bottom:"100px",textAlign:"center"}},[l("span",{style:{fontSize:"25px"}},"–ù–∞–∂–º–∏—Ç–µ —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å")],-1),U={class:"HeadText",style:{width:"100%",display:"flex",justifyContent:"center",marginTop:"20px"}},X={class:"animated-text",style:{fontSize:"35px",fontWeight:"bold"}},Z=l("div",{class:"machineContainer"},[l("line",{stroke:"#000","stroke-width":"2"}),l("div",{id:"stage",class:"perspective-on"},[l("div",{id:"rotate"},[l("div",{id:"ring1",class:"ring"}),l("div",{id:"ring2",class:"ring"}),l("div",{id:"ring3",class:"ring"}),l("div",{id:"ring4",class:"ring"}),l("div",{id:"ring5",class:"ring"})])])],-1),F={key:0,class:"ButtonsSection",style:{zIndex:"100",bottom:"5%",position:"absolute",width:"100%",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"}},q={style:{display:"flex",alignItems:"center"}},Y=l("span",{style:{fontSize:"15px",fontWeight:"bold"}},"–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–±–µ–¥–Ω—ã–µ –ª–∏–Ω–∏–∏: ",-1),G={class:"checkbox-wrapper-7",style:{marginLeft:"5px"}},J=l("label",{class:"tgl-btn",for:"cb2-7"},null,-1),K={style:{marginTop:"20px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},Q=l("span",{style:{fontSize:"30px",fontWeight:"bold"}},"–°–¢–ê–í–ö–ê:",-1),$={style:{display:"flex",alignItems:"center"}},tt=l("p",{style:{fontSize:"50px",marginTop:"-5px"}},"-",-1),et=[tt],st={style:{fontSize:"25px",fontWeight:"bold"}},nt={key:1,class:"ButtonsSection",style:{zIndex:"100",bottom:"5%",position:"absolute",width:"100%",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"}};function it(s,t,n,r,e,o){return d(),u(S,null,[P,l("div",{class:"WinScreen",style:_({display:e.showWinScreen?"flex":"none"}),onClick:t[0]||(t[0]=(...i)=>o.closeWinningScreen&&o.closeWinningScreen(...i))},[V,l("div",N,[j,l("span",H,m(this.winAmount)+"üçÜ",1)]),O],4),l("div",U,[l("span",X,[(d(),u(S,null,B("SLOTS",(i,a)=>l("span",{key:a},m(i),1)),64))])]),Z,e.showSpinButtons?(d(),u("div",F,[l("div",q,[Y,l("div",G,[W(l("input",{class:"tgl tgl-ios",id:"cb2-7",type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=i=>e.showLines=i),onChange:t[2]||(t[2]=i=>o.showWinningLines(i.target.checked))},null,544),[[z,e.showLines]]),J])]),l("div",K,[Q,l("div",$,[l("button",{class:"glow-on-hover",onMousedown:t[3]||(t[3]=(...i)=>o.startDecrement&&o.startDecrement(...i)),onMouseup:t[4]||(t[4]=(...i)=>o.stopInterval&&o.stopInterval(...i)),onMouseleave:t[5]||(t[5]=(...i)=>o.stopInterval&&o.stopInterval(...i)),onClick:t[6]||(t[6]=()=>{e.bet-100>=100&&(e.bet-=100)}),style:{textAlign:"center",width:"80px",marginRight:"30px"}},et,32),l("span",st,m(e.bet)+"üçÜ",1),l("button",{class:"glow-on-hover",onMousedown:t[7]||(t[7]=(...i)=>o.startIncrement&&o.startIncrement(...i)),onMouseup:t[8]||(t[8]=(...i)=>o.stopInterval&&o.stopInterval(...i)),onMouseleave:t[9]||(t[9]=(...i)=>o.stopInterval&&o.stopInterval(...i)),onClick:t[10]||(t[10]=()=>e.bet+=100),style:{fontSize:"35px",textAlign:"center",width:"80px",marginLeft:"30px"}}," + ",32)])]),l("button",{class:"glow-on-hover",onClick:t[11]||(t[11]=i=>o.startSpinning("single")),style:{fontSize:"23px",textAlign:"center",marginTop:"30px"}},"SPIN üé∞"),l("button",{class:"glow-on-hover",onClick:t[12]||(t[12]=i=>o.startSpinning("auto")),style:{fontSize:"23px",textAlign:"center",marginTop:"30px"}},"AUTO üé≤")])):v("",!0),e.mode=="auto"?(d(),u("div",nt,[l("button",{class:"glow-on-hover",onClick:t[13]||(t[13]=i=>e.mode="single"),style:{fontSize:"23px",textAlign:"center",marginTop:"30px"}},"STOP üé∞")])):v("",!0)],64)}const lt=L(D,[["render",it]]);export{lt as default};
