import{j as E,u as v,k as f,d as I,l as M,b as t,c as o,e as r,t as s,f as d,m as h,F as B,p as j,_ as A,o as P,r as U,q as g}from"./index-DtfPuSzW.js";const N=E("leaderboard",{state:()=>({leaderboard:null,lastFetch:0,dailyLeaderboard:null,dailyLastFetch:0,monthlyLeaderboard:null,monthlyLastFetch:0}),actions:{async fetchLeaderboard(){const n=Date.now();if(!(n-this.lastFetch<60*1e3&&this.leaderboard))try{const e=v(),a=await f.get("https://taptaptap.testcoin.uk/leaderboard",{headers:{"x-api-key":e.getAccessToken}});this.leaderboard=a.data,this.lastFetch=n}catch(e){console.error("Error fetching data:",e)}},async fetchDailyLeaderboard(){const n=Date.now();if(!(n-this.dailyLastFetch<60*1e3&&this.dailyLeaderboard))try{const e=v(),a=await f.get("https://taptaptap.testcoin.uk/leaderboard/daily",{headers:{"x-api-key":e.getAccessToken}});this.dailyLeaderboard=a.data,this.dailyLastFetch=n}catch(e){console.error("Error fetching data:",e)}},async fetchMonthlyLeaderboard(){const n=Date.now();if(!(n-this.monthlyLastFetch<60*1e3&&this.monthlyLeaderboard))try{const e=v(),a=await f.get("https://taptaptap.testcoin.uk/leaderboard/monthly",{headers:{"x-api-key":e.getAccessToken}});this.monthlyLeaderboard=a.data,this.monthlyLastFetch=n}catch(e){console.error("Error fetching data:",e)}}}}),V={class:"leaderboard-title"},q={class:"leaderboard-list"},z={key:0,class:"player you"},G={class:"avatar",style:{display:"flex",alignItems:"center",justifyContent:"center"}},H=["src","alt"],J={key:1,class:"initials"},K={key:0,class:"player-info"},O={class:"name"},Q={class:"player-score"},R={key:1,class:"player-info"},W={class:"name"},X={class:"player-score"},Y={class:"rank"},Z={class:"avatar",style:{display:"flex",alignItems:"center",justifyContent:"center"}},x=["src","alt"],ee={key:1,class:"initials"},ae={class:"player-info"},te={key:0,class:"name"},oe={key:1},se={class:"player-score"},re=I({__name:"LeaderboardItem",props:{leaderboard:{},balance:{},leaderBoardTitle:{}},setup(n){const{t:e}=M();return(a,k)=>{var L,b,p,i,l,y,u,_,m,S,F,T,w,C;return t(),o(B,null,[r("div",V," 🏆 "+s(a.$t(a.leaderBoardTitle)),1),r("div",q,[a.leaderboard.me!=null?(t(),o("div",z,[r("span",G,[(b=(L=a.leaderboard)==null?void 0:L.me)!=null&&b.avatar_url?(t(),o("img",{key:0,src:(p=a.leaderboard)==null?void 0:p.me.avatar_url,alt:(i=a.leaderboard)==null?void 0:i.me.identity},null,8,H)):(t(),o("div",J,s((u=(y=(l=a.leaderboard)==null?void 0:l.me)==null?void 0:y.identity)==null?void 0:u.substring(0,2).toUpperCase()),1))]),a.leaderBoardTitle=="top.topBalance"?(t(),o("div",K,[r("span",O,s(d(e)("top.yourPlace",{place:(m=(_=a.leaderboard)==null?void 0:_.me)==null?void 0:m.position})),1),r("span",Q,"🍆 "+s(a.balance.toLocaleString()),1)])):(t(),o("div",R,[r("span",W,s(d(e)("top.yourPlace",{place:(F=(S=a.leaderboard)==null?void 0:S.me)==null?void 0:F.position})),1),r("span",X,"🍆 +"+s((w=(T=a.leaderboard)==null?void 0:T.me)==null?void 0:w.score.toLocaleString()),1)]))])):h("",!0),(t(!0),o(B,null,j((C=a.leaderboard)==null?void 0:C.players,(c,D)=>(t(),o("div",{key:c.id,class:"player"},[r("span",Y,s(D==0?"👑":D+1+"."),1),r("span",Z,[c.avatar_url?(t(),o("img",{key:0,src:c.avatar_url,alt:c.identity},null,8,x)):(t(),o("div",ee,s(c.identity.substring(0,2).toUpperCase()),1))]),r("div",ae,[c.is_premium?(t(),o("span",te,s(c.identity),1)):(t(),o("span",oe,s(c.identity),1)),r("span",se,"🍆 "+s(a.leaderBoardTitle!="top.topBalance"?"+":"")+" "+s(c.score.toLocaleString()),1)])]))),128))])],64)}}}),$=A(re,[["__scopeId","data-v-2e2ad55c"]]),de={class:"tabs"},ne={key:0,class:"leaderboard"},le={key:1,class:"leaderboard"},ce={key:2,class:"leaderboard"},ie=I({__name:"Leaderboard",setup(n){const e=N(),k=v().user;P(()=>{e.fetchDailyLeaderboard(),e.fetchMonthlyLeaderboard(),e.fetchLeaderboard()});const{t:L}=M();L("top.yourPlace",{place:123});const b=U("Day"),p=i=>{b.value=i};return(i,l)=>{var y,u,_;return t(),o(B,null,[r("div",de,[r("button",{onClick:l[0]||(l[0]=m=>p("Day")),class:"tab"},s(i.$t("top.day")),1),r("button",{onClick:l[1]||(l[1]=m=>p("Month")),class:"tab"},s(i.$t("top.month")),1),r("button",{onClick:l[2]||(l[2]=m=>p("Balance")),class:"tab"},s(i.$t("top.balance")),1)]),b.value==="Day"?(t(),o("div",ne,[d(e).dailyLeaderboard?(t(),g($,{key:0,leaderboard:d(e).dailyLeaderboard,balance:((y=d(k))==null?void 0:y.balance)||0,"leader-board-title":"top.topToday"},null,8,["leaderboard","balance"])):h("",!0)])):h("",!0),b.value==="Month"?(t(),o("div",le,[d(e).monthlyLeaderboard?(t(),g($,{key:0,leaderboard:d(e).monthlyLeaderboard,balance:((u=d(k))==null?void 0:u.balance)||0,"leader-board-title":"top.topMonth"},null,8,["leaderboard","balance"])):h("",!0)])):h("",!0),b.value==="Balance"?(t(),o("div",ce,[d(e).monthlyLeaderboard?(t(),g($,{key:0,leaderboard:d(e).monthlyLeaderboard,balance:((_=d(k))==null?void 0:_.balance)||0,"leader-board-title":"top.topBalance"},null,8,["leaderboard","balance"])):h("",!0)])):h("",!0)],64)}}}),he=A(ie,[["__scopeId","data-v-cca6a338"]]);export{he as default};
